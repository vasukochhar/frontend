import {
  __commonJS,
  require_react
} from "./chunk-2YIMICFJ.js";

// node_modules/use-image/index.js
var require_use_image = __commonJS({
  "node_modules/use-image/index.js"(exports, module) {
    var React = require_react();
    module.exports = function useImage(url, crossOrigin, referrerpolicy) {
      const statusRef = React.useRef("loading");
      const imageRef = React.useRef();
      const [_, setStateToken] = React.useState(0);
      const oldUrl = React.useRef();
      const oldCrossOrigin = React.useRef();
      const oldReferrerPolicy = React.useRef();
      if (oldUrl.current !== url || oldCrossOrigin.current !== crossOrigin || oldReferrerPolicy.current !== referrerpolicy) {
        statusRef.current = "loading";
        imageRef.current = void 0;
        oldUrl.current = url;
        oldCrossOrigin.current = crossOrigin;
        oldReferrerPolicy.current = referrerpolicy;
      }
      React.useLayoutEffect(
        function() {
          if (!url) return;
          var img = document.createElement("img");
          function onload() {
            statusRef.current = "loaded";
            imageRef.current = img;
            setStateToken(Math.random());
          }
          function onerror() {
            statusRef.current = "failed";
            imageRef.current = void 0;
            setStateToken(Math.random());
          }
          img.addEventListener("load", onload);
          img.addEventListener("error", onerror);
          crossOrigin && (img.crossOrigin = crossOrigin);
          referrerpolicy && (img.referrerPolicy = referrerpolicy);
          img.src = url;
          return function cleanup() {
            img.removeEventListener("load", onload);
            img.removeEventListener("error", onerror);
          };
        },
        [url, crossOrigin, referrerpolicy]
      );
      return [imageRef.current, statusRef.current];
    };
  }
});
export default require_use_image();
//# sourceMappingURL=use-image.js.map
